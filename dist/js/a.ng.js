(function(){var hk;hk=angular.module("hk",[]),hk.directive("hkList",["$timeout",function($timeout){return{replace:!0,restrict:"E",template:function(){return'<a class="app-a" ng-click="openPage(page.url)">\n  <div class="app-title" ng-bind="page.title"></div>\n  <div class="app-aside">\n    <img class="app-favicon" ng-src="{{page.faviconUrl}}">\n    <span class="app-url" ng-bind="page.domain"></span>\n    <span class="app-split"></span>\n    <div class="app-delete" title="このページを削除" ng-click="deletePage($event, $index)">\n      <div class="i-delete-component"></div>\n      <div class="i-delete-component"></div>\n    </div>\n  </div>\n</a>'},link:function(scope,el){return $timeout(function(){var parentH;return parentH=el[0].parentNode,parentH.style.height=""+parentH.clientHeight+"px"},200),scope.openPage=function(url){return chrome.tabs.create({url:url},function(){})}}}}]).controller("HkCtrl",["$scope","$q",function($scope,$q){var getPage,subPages;return getPage=function(){var deferred;return deferred=$q.defer(),chrome.storage.local.get(["page"],function(response){return deferred.resolve(response.page)}),deferred.promise},subPages=null,$scope.pages=null,getPage().then(function(pages){return subPages=pages,$scope.pages=angular.copy(pages)}),$scope.removalIdxs=[],$scope.deletePage=function(e,idx){return e.stopPropagation(),$scope.removalIdxs.push(idx),subPages.splice(idx,1),setTimeout(function(){return function(ba){return ba.setBadgeText({text:""+subPages.length}),0===subPages.length?ba.setBadgeBackgroundColor({color:"#bcb0b1"}):void 0}(chrome.browserAction)},700),chrome.storage.local.set({page:subPages},function(){})}}])}).call(this);